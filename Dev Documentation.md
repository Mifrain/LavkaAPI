Вот обновленная документация с правильной структурой каталогов и диаграммой компонентов:

---

# LavkaAPI Documentation

## Developer Documentation

### Содержание

1. [Обзор архитектуры](#обзор-архитектуры)
2. [Структура каталогов](#структура-каталогов)
3. [Классы и функции](#классы-и-функции)
4. [Методология тестирования](#методология-тестирования)
5. [Функциональные результаты](#функциональные-результаты)
6. [Требования к среде](#требования-к-среде)

### Обзор архитектуры

LavkaAPI предназначен для управления заказами и товарным ассортиментом интернет-магазина. Основные компоненты системы включают обработку заказов и управление товарами. Эти компоненты взаимодействуют с базой данных для хранения и извлечения информации.

#### Диаграмма компонентов

```plaintext
+-------------------+
|     LavkaAPI      |
+-------------------+
| - main.py         |
| - config.py       |
| - database.py     |
| - requirements.txt|
|                   |
|   +-------------+ |
|   |  lavka      | |
|   |-------------| |
|   |  - routes   | |
|   |    - lavka.py  |
|   |    - market.py |
|   |    - product.py|
|   |  - crud.py    |
|   |  - models.py  |
|   |  - schemas.py |
|   +-------------+ |
|                   |
|   +-------------+ |
|   |  order      | |
|   |-------------| |
|   |  - routes   | |
|   |    - order.py  |
|   |  - crud.py    |
|   |  - models.py  |
|   |  - schemas.py |
|   +-------------+ |
|                   |
|   +-------------+ |
|   | migrations  | |
|   |-------------| |
|   |  - env.py   | |
|   |  - script.py.mako|
|   |  - README   | |
|   +-------------+ |
|                   |
+-------------------+
```

### Структура каталогов

```plaintext
LavkaAPI/
│
├── .env                # Переменные среды
├── .gitignore          # Исключения для git
├── alembic.ini         # Конфигурация Alembic для миграций
├── comands.txt         # Дополнительные команды
├── readme.md           # Документация проекта
├── requirements.txt    # Требуемые пакеты Python
│
├── app/                # Папка с основным приложением
│   └── lavka/
│       └── routes/
│            ├── lavka.py
│            ├── market.py
│            └── product.py
│       ├── crud.py      # Операции CRUD
│       ├── models.py    # Модели данных
│       └── schemas.py   # Схемы данных
│
├── migrations/         # Папка с миграциями
│   ├── versions/       # Версии миграций
│   ├── env.py          # Настройка окружения миграций
│   ├── README          # Документация по миграциям
│   └── script.py.mako  # Шаблон для миграций
│
├── order/              # Папка с логикой заказов
│    └── routes/
│        │    └── order.py
│        ├── crud.py      # Операции CRUD для заказов
│        ├── models.py    # Модели данных для заказов
│        └── schemas.py   # Схемы данных для заказов
├── config.py    # Конфигурация
├── database.py  # Настройка базы данных
└── main.py      # Главный файл приложения
```

### Классы и функции

#### main.py

**Описание:** Инициализация приложения.

#### config.py

**Описание:** Настройки конфигурации для приложения.  
**Переменные:**  
`DB_URI`: URL для подключения к базе данных.

#### database.py

**Описание:** Подключение и настройка базы данных.  
**Переменные:**  
`engine`: Создание асинхронного движка.  
`async_session`: Асинхронная Сессия.  
`Base`: Базовая модель для ORM.

#### lavka/crud.py

#### order/crud.py

**Описание:** Операции CRUD для работы с данными. Каждая ORM Модель имеет свой CRUD  
**Функции:**  
`get_orders()`: Получение списка элементов.  
`get_order()`: Получение элементa по ID.  
`create_order()`: Создание нового элемента.  
`update_order()`: Обновление существующего элемента.  
`delete_order()`: Удаление элемента.

Такой Функционал имеет каждый CRUD

#### lavka/models.py

**Описание:** Определение моделей данных.  
**Классы:**  
`Markets`: Модель Магазина.  
`Product`: Модель Продукта.
`Lavka`: Модель Продуктов в определенном магазине.

#### lavka/routes/schemas.py

**Описание:** Определение схем данных для валидации и сериализации.  
**Классы:**  
`SMarkets`: Схема Магазина.  
`SProducts`: Схема Продукта.
`SLavka`: Схема Продуктов в определенном магазине.

#### lavka/routes/product.py

**Описание:** Маршруты для управления продуктами.  
**Функции:**  
`get_products()`: Получение списка продуктов.  
`get_product()`: Получение продутка по ID.  
`add_product()`: Добавление продукта

#### lavka/routes/market.py

**Описание:** Маршруты для управления магазинами.  
**Функции:**  
`get_markets()`: Получение списка магазинов.  
`get_market()`: Получение магазина по ID.  
`add_market()`: Добавление магазина

#### lavka/routes/lavka.py

**Описание:** Маршруты для управления продуктами в магазинах.  
**Функции:**  
`get_all_products()`: Получение списка продуктов во всех магазинах в наличии.  
`get_products()`: Получение имеющихся продутков в магазине по его ID.  
`get_product()`: Получение определенного продутка в магазине по их ID.  
`add_lavka_product()`: Добавление определенного продукта в определенный магазин.

#### order/routes/order.py

**Описание:** Маршруты для управления заказами.  
**Функции:**  
`get_orders()`: Получение списка заказов.  
`create_order()`: Создание нового заказа.  
`cancel_order()`: Отмена заказа.

### Методология тестирования

Методология тестирования включает модульное тестирование отдельных функций и интеграционное тестирование общей функциональности системы.

### Функциональные результаты

API успешно обрабатывает CRUD операции для товаров и заказов, обеспечивая корректное взаимодействие с базой данных.

### Требования к среде

- Операционная система: Windows, MacOS, Linux
- Python 3.9
- Установить необходимые библиотеки через `pip install -r requirements.txt`
